
<div class="row">
    <!-- Column -->
  <div class="col-lg-12">
    <div class="card">
      <!-- Nav tabs -->
      <ul class="nav nav-tabs profile-tab" role="tablist">
        <li class="nav-item"> <a class="nav-link active liInfoGen" data-toggle="tab" href="#" role="tab">General project information</a> <span class="nomUser">User: {{userAsociado[0]?.nombres_us}}</span></li>
      </ul>
      <!-- Tab panes -->
      <div class="tab-content">        
        <div class="tab-pane active" id="settings" role="tabpanel">
          <div class="card-body">
            <div class="row">
              <div class="col-lg-8 col-md-8">
                <small class="text-muted">Project ID: &nbsp; <b>{{inversion['id_inv']}}</b> </small>
              </div>
              <br>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Project date: &nbsp; {{inversion['fechareg_inv'] | date: 'dd/MM/yyyy'}} </small>
              </div>
            </div>
            <br>

            <div class="row">
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Project name:</small>
                <h6>{{inversion['nombre_inv']}}</h6> 
              </div>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Capital invested in foreign currency:</small>
                <h6>{{inversion['capital_extra_inv'] | currency: inversion['moneda_extra_inv']}}</h6> 
              </div>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Foreign currency:</small>
                <h6>{{inversion['moneda_extra_inv']}}</h6> 
              </div>
            </div>
            <br>

            <div class="row">
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Exchange rate:</small>
                <h6>{{ inversion['tasa_cambio_inv'] | currency: inversion['moneda_extra_inv'] }}</h6> 
              </div>
              <br>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Capital invested in COP currency:</small>
                <h6>{{inversion['capital_cop_inv'] | currency: inversion['moneda_extra_inv']}}</h6> 
              </div>
              <br>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Interest rate (AE):</small>
                <h6>{{inversion['tasa_ea_inv']}}%</h6>
              </div>
            </div>
            <br>

            <div class="row">
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Interest accrued to date in Foreign Currency:</small>
                <h6>{{inversion['interes_extra_inv']}}%</h6>
              </div>
              <br>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Interest accrued to date in Currency COP:</small>
                <h6>{{inversion['interes_cop_inv']}}%</h6>
              </div>
              <br>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Project country:</small>
                <h6>{{inversion['pais_inv']}}</h6>
              </div>
            </div>
            <br>

            <div class="row">
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Annual return in foreign currency:</small>
                <h6>{{inversion['renta_extra_inv'] | currency: inversion['moneda_extra_inv']}}</h6>
              </div>
              <br>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Annual return in COP currency:</small>
                <h6>{{inversion['renta_cop_inv'] | currency: inversion['moneda_extra_inv']}}</h6>
              </div>
              <br>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Project time:</small>
                <h6>{{inversion['tiempo_inv']}} Months</h6>
              </div>
            </div>
            <br>

            <div class="row">
              <div class="col-lg-8 col-md-8">
                <small class="text-muted">Description:</small>
                <h6>{{inversion['descripcion_inv']}}</h6>
              </div>
              <br>
              <div class="col-lg-4 col-md-4">
                <small class="text-muted">Project status:</small>
                <h6 *ngIf="inversion['estado_inv'] === 1" class="text-warning">ACTIVE</h6>
                <h6 *ngIf="inversion['estado_inv'] === 0" class="text-danger">INACTIVE</h6>
              </div>
            </div>
            <br>

            <div class="row">
              <div class="col-lg-12">
                <button *ngIf="this.usuario[0].admin_us === 'Y'" type="button" (click)="modalEditInvert(inversion)" class="btn waves-effect waves-light btn-rounded btn-success" data-toggle="modal" data-target=".modalEditInver">Edit project</button>
                &nbsp;
                <button type="button" (click)="goBack()" class="btn waves-effect waves-light btn-rounded btn-danger">Back</button>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Tabla con los anexos -->
<div *ngIf=" anexos.length > 0 " class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">Currently loaded attachments</h4>
        <h6 class="card-subtitle">These are the annexes loaded for the project {{inversion['nombre_inv']}} </h6>
        <div class="table-responsive">
          <table class="table tablaAnexos">
            <thead>
              <tr>
                <th># Annexed</th>
                <th>Movement</th>
                <th>Capital foreign currency</th>
                <th>Capital currency COP</th>
                <th>Interest in foreign currency</th>
                <th>Interest in COP currency</th>
                <th class="headW">Date</th>
                <th>File</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let anexo of anexos">
                <td> <a class="aAnexos" title="Ver Anexo" (click)="navegarAnexo(anexo)"> {{anexo.id_anex}} </a></td>
                <td>{{anexo.movimiento_anex}}</td>
                <td>{{anexo.capital_extra_anex | currency: anexo.moneda_anex }} </td>
                <td>{{anexo.capital_cop_anex | currency: anexo.moneda_anex }} </td>
                <td>{{anexo.interes_extra_anex}}%</td>
                <td>{{anexo.interes_cop_anex}}%</td>
                <td><span class="text-muted"><i class="fa fa-calendar-o"></i> {{ anexo.fechAnexo }}</span> </td>
                <td *ngIf=" anexo.tipo_archivo_info === 'pdf' " (click)="verArchivo( anexo.tipo_archivo_info, anexo.nom_archivo_info )" class="cursor"><img class="logoFile" src="../../../assets/images/pdf.png" alt=""> </td>
                <td *ngIf=" anexo.tipo_archivo_info === 'word' " (click)="verArchivo( anexo.tipo_archivo_info, anexo.nom_archivo_info )" class="cursor"><img class="logoFile" src="../../../assets/images/word.png" alt=""></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Anexos para la inversión  -->
<div *ngIf="this.usuario[0].admin_us === 'Y'" class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-body">
        <button type="button" (click)="navegarCrearAnexo()" class="btn waves-effect waves-light btn-rounded btn-success btn-block" >Create Annex</button>
      </div>
    </div>
  </div>
</div>




<!-- ************************************************************************************************* -->
<!-- Modal para editar la inversión -->
<!-- ************************************************************************************************* -->
<div class="modal fade modalEditInver" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myLargeModalLabel">Project ID: &nbsp; <b>{{editInversion['id_inv']}}</b></h4>
        <h4 class="modal-title" id="myLargeModalLabel">Project date: &nbsp; {{editInversion['fechareg_inv'] | date: 'dd/MM/yyyy'}}</h4>
      </div>
      <div class="modal-body">
        <div class="comment-text w-100">

          <form class="formEditTicket m-t-40" [formGroup]="FormEditInversion" (submit)="editarInversion(editInversion['id_inv'])">
            <div class="row">
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="text" formControlName="nombreInver" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Project name</label>
                </div>
              </div>
              <div class="col-lg-3 col-md-3">
                <div class="form-group m-b-40 focused">
                  <input type="number" formControlName="capitalExtra" class="form-control">
                  <span class="bar"></span>
                  <label for="input2">Capital invested in foreign currency</label>
                </div>
              </div>
              <div class="col-lg-3 col-md-3">
                <div class="form-group m-b-40 focused">
                  <input type="date" formControlName="fecha" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Project date</label>
                </div>
              </div>
              <div class="col-lg-2 col-md-2">
                <div class="form-group m-b-40 focused">
                  <label for="input3">Foreign currency</label>
                  <select formControlName="monedaExtra" class="form-control">
                    <option value="COP">COP</option>
                    <option value="EUR">EUR</option>
                    <option value="USD">USD</option>
                  </select>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="number" formControlName="tasaCambio" class="form-control">
                  <span class="bar"></span>
                  <label for="input3">Exchange rate</label>
                </div>
              </div>
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="number" formControlName="capitalCop" class="form-control">
                  <span class="bar"></span>
                  <label for="input3">Capital invested in COP currency</label>
                </div>
              </div>
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="number" formControlName="tasaInteres" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Interest rate (AE)</label>
                </div>
              </div>
            </div>
  
            <div class="row">
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="text" formControlName="interesExtra" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Interest accrued to date in Foreign Currency</label>
                </div>
              </div>
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="text" formControlName="interesCop" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Interest accrued to date in Currency COP</label>
                </div>
              </div>
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="text" formControlName="pais" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Project country</label>
                </div>
              </div>
            </div>
  
            <div class="row">
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="number" formControlName="rentaExtra" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Annual return in foreign currency</label>
                </div>
              </div>
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="number" formControlName="rentaCop" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Annual return in COP currency</label>
                </div>
              </div>
              <div class="col-lg-4 col-md-4">
                <div class="form-group m-b-40 focused">
                  <input type="number" formControlName="tiempo" class="form-control">
                  <span class="bar"></span>
                  <label for="input1">Project time</label>
                </div>
              </div>
            </div>
  
            <div class="row">
              <div class="col-lg-8 col-md-8">
                <div class="form-group m-b-40 focused">
                  <textarea class="form-control" formControlName="descripcion" rows="2"></textarea>
                  <span class="bar"></span>
                  <label for="input3">Description</label>
                </div>
              </div>
              <div class="col-lg-4 col-md-4">
                <div class="checkbox checkbox-info pull-left p-t-0">
                  <input id="checkbox-signup" formControlName="estado" type="checkbox" class="filled-in chk-col-light-blue">
                   <label for="checkbox-signup">Project enabled</label><br><br>
                  <h6>You can update the project and allow it to be seen. </h6>
                </div> 
              </div>
            </div>
  
            <div class="row">
              <div class="col-lg-6 col-md-6">
                <div class="form-group">
                  <button type="submit" class="btn waves-effect waves-light btn-rounded btn-success btn-block">Edit project</button>
                </div>
              </div>
              <div class="col-lg-6 col-md-6">
                <button type="button" class="btn waves-effect waves-light btn-rounded btn-danger btn-block" data-dismiss="modal">Close</button>
              </div>
            </div>
  
            <div class="row">
              <div class="col text-danger">
                <p *ngIf="campoNoValido('nombreInver')">*Project name is required.</p>
                <p *ngIf="campoNoValido('capitalExtra')">*Capital in foreign currency is required.</p>
                <p *ngIf="campoNoValido('monedaExtra')">*Foreign currency is required.</p>
                <p *ngIf="campoNoValido('tasaCambio')">*The exchange rate is required.</p>
                <p *ngIf="campoNoValido('capitalCop')">*The capital invested in COP is required.</p>
                <p *ngIf="campoNoValido('tasaInteres')">*The interest rate is required.</p>
                <p *ngIf="campoNoValido('interesExtra')">*Interest in foreign currency is required.</p>
                <p *ngIf="campoNoValido('interesCop')">*Interest in COP currency is required.</p>
                <p *ngIf="campoNoValido('pais')">*Country is required.</p>
                <p *ngIf="campoNoValido('rentaExtra')">*Profitability in Foreign Currency is required.</p>
                <p *ngIf="campoNoValido('rentaCop')">*Profitability in COP Currency is required.</p>
                <p *ngIf="campoNoValido('tiempo')">*Project time is required.</p>
                <p *ngIf="campoNoValido('descripcion')">*Description is required.</p>
              </div>
            </div>
          </form>


        </div>
      </div>
    </div>
  </div>
</div>

